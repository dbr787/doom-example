#!/bin/bash

# Upload artifacts for cross-platform compatibility
# This runs for ALL steps (doom step + dynamically created move steps)
echo "Post-command hook running for step: $BUILDKITE_STEP_KEY"

# Upload any files matching the move data pattern
if ls *__*.txt 1> /dev/null 2>&1; then
  buildkite-agent artifact upload "*__*.txt"
  echo "Uploaded move data artifacts: $(ls *__*.txt)"
else
  echo "No move data artifacts found to upload"
fi

# Upload any screenshot files  
if ls *.png 1> /dev/null 2>&1; then
  buildkite-agent artifact upload "*.png"
  echo "Uploaded screenshot artifacts: $(ls *.png)"
else
  echo "No screenshot artifacts found to upload"
fi
